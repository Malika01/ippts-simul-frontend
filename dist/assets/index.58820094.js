import{c as z,j as u,a as e,F,C as E,R as h,r as G,T as J,b as V,d as A,B as C,e as H,l as q,f as X}from"./vendor.e6b25637.js";const K=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const t of o)if(t.type==="childList")for(const l of t.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function c(o){const t={};return o.integrity&&(t.integrity=o.integrity),o.referrerpolicy&&(t.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?t.credentials="include":o.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function s(o){if(o.ep)return;o.ep=!0;const t=c(o);fetch(o.href,t)}};K();const Y=z({palette:{primary:{main:"#03dac5"},secondary:{main:"#bb86fc"},success:{main:"#90ee02"},error:{main:"#ff593a"},warning:{main:"#efe73e"},mode:"dark"},typography:{fontFamily:"'Courier New', Courier, monospace",fontSize:Number("calc(12px + 1vmin)")}}),W=({row:r,col:n})=>e("td",{children:e("input",{required:!0,id:`adjcell${r}${n}`,name:`adjcell${r}${n}`,type:"text",pattern:"[+-]?[0-9]*",title:"max 3 digit number",defaultValue:"0"})}),Q=({row:r,col:n})=>e("td",{children:e("input",{disabled:!0,id:`adjcell${r}${n}`,name:`adjcell${r}${n}`,type:"text",defaultValue:"0"})}),Z=({row:r,col:n})=>e("td",{children:e("input",{required:!0,id:`compcell${r}${n}`,name:`compcell${r}${n}`,type:"text",pattern:"[0-9]*",title:"max 3 digit number"})}),_=({row:r})=>e("td",{children:e("input",{id:`expr${r}`,name:`expr${r}`,type:"text",maxLength:Number("20")})});function P({num1:r,num2:n,expr:c}){let s=[],o=[];if(c==!0){for(let t=1;t<n;t++)s.push(u("td",{children:["Server",t]}));o.push(u("tr",{children:[e("td",{}),s,e("td",{children:"EXPR"})]}))}else{for(let t=1;t<=n;t++)s.push(u("td",{children:["Task",t]}));o.push(u("tr",{children:[e("td",{}),s]}))}for(let t=0;t<r;t++){s=[];for(let l=0;l<n;l++)c==!0?l==n-1?s.push(e(_,{row:t})):s.push(e(Z,{row:t,col:l})):t==l?s.push(e(Q,{row:t,col:l})):s.push(e(W,{row:t,col:l}));o.push(u("tr",{children:[u("td",{children:["Task",t+1]}),s]}))}return e(F,{children:o})}function ee({servers:r,tasks:n}){var c=sessionStorage.getItem("ippts-output"),s=JSON.parse(c),o=s.length,t=r*70+"px",l=[];l.push([{type:"string",id:"Server"},{type:"string",id:"Task"},{type:"date",id:"Start"},{type:"date",id:"End"}]);for(let p=0;p<o;p++){let f="Server"+(s[p].server.serverId+1),m="Task"+(s[p].task.taskId+1),b=s[p].est,S=s[p].eft;l.push([f,m,new Date(b),new Date(S)])}return u("div",{style:{marginTop:"2rem"},className:"chart",children:["RESULT OF TASK SCHEDULING BY THE IPPTS ALGO:",e("br",{}),e("br",{}),e(E,{width:"90%",height:t,chartType:"Timeline",loader:e("h3",{style:{color:"white"},children:"Loading Chart"}),data:l,options:{backgroundColor:"#1e1e1e",colors:["#ff593a","#efe73e","#90ee02","#bb86fc","#03dac5"],timeline:{rowLabelStyle:{fontName:"monospace",fontSize:"calc(12px + 1vmin)",color:"white"},barLabelStyle:{fontName:"monospace",fontSize:"calc(12px + 1vmin)",color:"white"}},avoidOverlappingGridLines:!1},rootProps:{class:"g-chart"}})]})}function te({SimArray:r,servers:n}){var c=sessionStorage.getItem("ippts-output"),s=JSON.parse(c),o=s.length,t=r.length,l=n*70+"px",p=[];p.push([{type:"string",id:"Server"},{type:"string",id:"Task and Result"},{type:"date",id:"Start"},{type:"date",id:"End"}]);for(let f=1;f<t;f++)for(let m=0;m<o;m++)if(s[m].task.taskId==r[f].taskId){let b="Server"+(s[m].server.serverId+1),S="Task"+(s[m].task.taskId+1)+" , Result = "+r[f].result,I=s[m].est,x=s[m].eft;p.push([b,S,new Date(I),new Date(x)])}return u("div",{style:{marginTop:"2rem"},className:"chart",children:["RESULT OF REALTIME IPPTS SIMULATION:",e("br",{}),e("br",{}),e(E,{width:"90%",height:l,chartType:"Timeline",loader:e("h3",{style:{color:"white"},children:"Loading Chart"}),data:p,options:{backgroundColor:"#1e1e1e",colors:["#ff593a","#efe73e","#90ee02","#bb86fc","#03dac5"],timeline:{rowLabelStyle:{fontName:"monospace",fontSize:"calc(12px + 1vmin)",color:"white"},barLabelStyle:{fontName:"monospace",fontSize:"calc(12px + 1vmin)",color:"white"}},avoidOverlappingGridLines:!1},rootProps:{class:"g-chart"}})]})}const re=()=>{const[r,n]=h.useState(2),[c,s]=h.useState(2),[o,t]=h.useState(!1),[l,p]=h.useState(!1),[f,m]=h.useState([{taskId:-1,result:"0"}]),[b,S]=h.useState(!1),[I,x]=h.useState("none"),[T,L]=h.useState(0),[M,j]=h.useState(!0),[D,R]=h.useState([{taskId:-1,result:" ",serverTime:" ",serverId:-1,serverUrl:" "}]),O=h.useRef(null);G.exports.useEffect(()=>{T>0&&S(!0)},[f]);const U=()=>{const a=document.createElement("a"),v=new Blob([sessionStorage.getItem("ippts-output")],{type:"application/json"});a.href=URL.createObjectURL(v),a.download="ippts.json",a.click()},B=()=>{var a=sessionStorage.getItem("ippts-output"),v=JSON.parse(sessionStorage.getItem("ippts-output")),w=v.length,g=q("ws://ec2-3-134-100-199.us-east-2.compute.amazonaws.com:5031/sim");g.on("connect",()=>{g.emit("data",a),console.log("connected")}),g.on("simulationprogress",d=>{let i=[{taskId:d.taskId,result:d.result,serverTime:d.serverTime,serverId:d.serverId,serverUrl:d.serverUrl}];R(y=>[...y,...i]),O.current.scrollIntoView(!0)}),g.on("simulationresponse",d=>{L(y=>y+1),console.log("task received =",d.taskId),console.log("its result =",d.result),console.log("ctr = ",T);let i=[{taskId:d.taskId,result:d.result}];m(y=>[...y,...i]),(T==w||T==-1)&&(console.log("disconnected"),g.disconnect())})};return e(J,{theme:Y,children:u("div",{children:[e("h1",{style:{backgroundColor:"#1e1e1e",color:"#bb86fc",padding:"3vh",margin:"0"},children:"IPPTS ALGORITHM SIMULATION"}),e(V,{maxWidth:"xl",children:u("form",{onSubmit:a=>{I=="run"?p(!1):I=="simulate"&&(S(!1),m([{taskId:-1,result:"0"}]),R([{taskId:-1,result:" ",serverTime:" ",serverId:-1,serverUrl:" "}]),L(0));let v=[],w=[];a.preventDefault();const g=new FormData(a.target),d=i=>({expression:g.get(`expr${i}`),taskId:i});for(let i=0;i<r;i++){let y={task:d(i),compCosts:[]},$={task:d(i),commCosts:[]};for(let k=0;k<c;k++){let N={server:{url:"",serverId:k},cost:Number(g.get(`compcell${i}${k}`))};y.compCosts.push(N)}for(let k=0;k<r;k++){let N={task:d(k),weight:Number(g.get(`adjcell${i}${k}`))};$.commCosts.push(N)}w.push(y),v.push($)}H({method:"post",url:"http://ec2-3-134-100-199.us-east-2.compute.amazonaws.com/ippts",headers:{"content-type":"application/json"},responseType:"json",data:{taskGraph:v,computationCostMatrix:w}}).then(function(i){console.log("ippts output array =",i.data),sessionStorage.setItem("ippts-output",JSON.stringify(i.data)),I=="run"?p(!0):I=="simulate"&&B()}).catch(function(i){console.log(i)})},children:[u("div",{style:{marginBlock:"2em"},children:[e("p",{children:"Enter the number of Nodes(Tasks) in Graph:"}),e(A,{inputProps:{type:"text",pattern:"[0-9]*",maxLength:"2",style:{padding:"0.5em"}},color:"primary",focused:!0,value:r,onChange:a=>n(Number(a.currentTarget.value))}),e("p",{children:"Enter the number of Servers:"}),e(A,{inputProps:{type:"text",maxLength:"2",pattern:"[0-9]*",style:{padding:"0.5em"}},color:"primary",focused:!0,value:c,onChange:a=>{s(Number(a.currentTarget.value)),Number(a.currentTarget.value)<=3&&Number(a.currentTarget.value)>0?t(!1):t(!0)}})]}),u("div",{style:{marginBlock:"2em"},children:[e("p",{children:"Enter the Adjacency Matrix of the Task Graph:"}),e("div",{style:{overflowX:"auto"},children:e("table",{className:"adjMat",id:"adjMat",children:e("tbody",{children:e(P,{num1:r,num2:r,expr:!1})})})})]}),u("div",{style:{marginBlock:"2em"},children:[e("p",{children:"Enter the Computation Cost Matrix (along with expression):"}),e("div",{style:{overflowX:"auto"},children:e("table",{className:"compMat",id:"compMat",children:e("tbody",{children:e(P,{num1:r,num2:c+1,expr:!0})})})})]}),e(C,{type:"submit",onClick:()=>{x("run"),j(!1)},name:"run",sx:{marginInline:"2em",marginBlock:"1em",fontSize:"calc(12px + 1vmin)"},variant:"outlined",color:"warning",children:"RUN ALGO"}),e(C,{type:"submit",onClick:()=>{x("simulate"),j(!1)},name:"simulate",sx:{marginInline:"2em",marginBlock:"1em",fontSize:"calc(12px + 1vmin)"},disabled:o,variant:"outlined",color:"warning",children:"SIMULATE"}),l?e(ee,{servers:c,tasks:r}):e("div",{}),b?e(te,{SimArray:f,servers:c}):e("div",{}),e("div",{id:"dispTasks",ref:O,children:b?e("div",{style:{color:"rgba(209, 213, 219, 1)",width:"90%",marginInline:"5%",textAlign:"left",overflowY:"scroll",height:"150px",fontSize:"0.75em"},children:D.map((a,v)=>{if(v!=0)return u("div",{style:{marginTop:"0.5em"},children:[a.serverUrl," (Server ",a.serverId,") |  ",a.serverTime," |  Task ",a.taskId+1," is ",a.result]},v)})}):e("div",{})}),e(C,{sx:{marginInline:"2em",marginBlock:"1em",fontSize:"calc(12px + 1vmin)"},disabled:M,variant:"outlined",color:"success",onClick:U,children:"Download Result"})]})})]})})};function se(){return e("div",{className:"App",children:e(re,{})})}X.render(e(h.StrictMode,{children:e(se,{})}),document.getElementById("root"));
