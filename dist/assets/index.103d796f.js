import{c as F,j as d,a as e,F as G,C as E,R as h,r as U,T as J,b as V,d as A,B as C,e as H,l as q,f as X}from"./vendor.e6b25637.js";const K=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const t of o)if(t.type==="childList")for(const a of t.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function c(o){const t={};return o.integrity&&(t.integrity=o.integrity),o.referrerpolicy&&(t.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?t.credentials="include":o.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function s(o){if(o.ep)return;o.ep=!0;const t=c(o);fetch(o.href,t)}};K();const Y=F({palette:{primary:{main:"#03dac5"},secondary:{main:"#bb86fc"},success:{main:"#90ee02"},error:{main:"#ff593a"},warning:{main:"#efe73e"},mode:"dark"},typography:{fontFamily:"'Courier New', Courier, monospace",fontSize:Number("calc(12px + 1vmin)")}}),W=({row:r,col:n})=>e("td",{children:e("input",{required:!0,id:`adjcell${r}${n}`,name:`adjcell${r}${n}`,type:"text",pattern:"[+-]?[0-9]*",title:"max 3 digit number",defaultValue:"0"})}),Q=({row:r,col:n})=>e("td",{children:e("input",{disabled:!0,id:`adjcell${r}${n}`,name:`adjcell${r}${n}`,type:"text",defaultValue:"0"})}),Z=({row:r,col:n})=>e("td",{children:e("input",{required:!0,id:`compcell${r}${n}`,name:`compcell${r}${n}`,type:"text",pattern:"[0-9]*",title:"max 3 digit number"})}),_=({row:r})=>e("td",{children:e("input",{id:`expr${r}`,name:`expr${r}`,type:"text",maxLength:Number("20")})});function P({num1:r,num2:n,expr:c}){let s=[],o=[];if(c==!0){for(let t=1;t<n;t++)s.push(d("td",{children:["Server",t]}));o.push(d("tr",{children:[e("td",{}),s,e("td",{children:"EXPR"})]}))}else{for(let t=1;t<=n;t++)s.push(d("td",{children:["Task",t]}));o.push(d("tr",{children:[e("td",{}),s]}))}for(let t=0;t<r;t++){s=[];for(let a=0;a<n;a++)c==!0?a==n-1?s.push(e(_,{row:t})):s.push(e(Z,{row:t,col:a})):t==a?s.push(e(Q,{row:t,col:a})):s.push(e(W,{row:t,col:a}));o.push(d("tr",{children:[d("td",{children:["Task",t+1]}),s]}))}return e(G,{children:o})}function ee({servers:r,tasks:n}){var c=sessionStorage.getItem("ippts-output"),s=JSON.parse(c),o=s.length,t=r*70+"px",a=[];a.push([{type:"string",id:"Server"},{type:"string",id:"Task"},{type:"date",id:"Start"},{type:"date",id:"End"}]);for(let u=0;u<o;u++){let f="Server"+(s[u].server.serverId+1),m="Task"+(s[u].task.taskId+1),b=s[u].est,S=s[u].eft;a.push([f,m,new Date(b),new Date(S)])}return d("div",{style:{marginTop:"2rem"},className:"chart",children:["RESULT OF TASK SCHEDULING BY THE IPPTS ALGO:",e("br",{}),e("br",{}),e(E,{width:"90%",height:t,chartType:"Timeline",loader:e("h3",{style:{color:"white"},children:"Loading Chart"}),data:a,options:{backgroundColor:"#1e1e1e",colors:["#ff593a","#efe73e","#90ee02","#bb86fc","#03dac5"],timeline:{rowLabelStyle:{fontName:"monospace",fontSize:"calc(12px + 1vmin)",color:"white"},barLabelStyle:{fontName:"monospace",fontSize:"calc(12px + 1vmin)",color:"white"}},avoidOverlappingGridLines:!1},rootProps:{class:"g-chart"}})]})}function te({SimArray:r,servers:n}){var c=sessionStorage.getItem("ippts-output"),s=JSON.parse(c),o=s.length,t=r.length,a=n*70+"px",u=[];u.push([{type:"string",id:"Server"},{type:"string",id:"Task and Result"},{type:"date",id:"Start"},{type:"date",id:"End"}]);for(let f=1;f<t;f++)for(let m=0;m<o;m++)if(s[m].task.taskId==r[f].taskId){let b="Server"+(s[m].server.serverId+1),S="Task"+(s[m].task.taskId+1)+" , Result = "+r[f].result,I=s[m].est,x=s[m].eft;u.push([b,S,new Date(I),new Date(x)])}return d("div",{style:{marginTop:"2rem"},className:"chart",children:["RESULT OF REALTIME IPPTS SIMULATION:",e("br",{}),e("br",{}),e(E,{width:"90%",height:a,chartType:"Timeline",loader:e("h3",{style:{color:"white"},children:"Loading Chart"}),data:u,options:{backgroundColor:"#1e1e1e",colors:["#ff593a","#efe73e","#90ee02","#bb86fc","#03dac5"],timeline:{rowLabelStyle:{fontName:"monospace",fontSize:"calc(12px + 1vmin)",color:"white"},barLabelStyle:{fontName:"monospace",fontSize:"calc(12px + 1vmin)",color:"white"}},avoidOverlappingGridLines:!1},rootProps:{class:"g-chart"}})]})}const re=()=>{const[r,n]=h.useState(2),[c,s]=h.useState(2),[o,t]=h.useState(!1),[a,u]=h.useState(!1),[f,m]=h.useState([{taskId:-1,result:"0"}]),[b,S]=h.useState(!1),[I,x]=h.useState("none"),[w,L]=h.useState(0),[M,j]=h.useState(!0),[D,R]=h.useState([{taskId:-1,result:" ",serverTime:" ",serverId:-1}]),O=h.useRef(null);U.exports.useEffect(()=>{w>0&&S(!0),console.log("simulation array = ",f)},[f]);const B=()=>{const l=document.createElement("a"),y=new Blob([sessionStorage.getItem("ippts-output")],{type:"application/json"});l.href=URL.createObjectURL(y),l.download="ippts.json",l.click()},z=()=>{var l=sessionStorage.getItem("ippts-output"),y=JSON.parse(sessionStorage.getItem("ippts-output")),T=y.length,g=q("ws://localhost:5031/sim");g.on("connect",()=>{g.emit("data",l),console.log("connected")}),g.on("simulationprogress",p=>{let i=[{taskId:p.taskId,result:p.result,serverTime:p.serverTime,serverId:p.serverId}];R(k=>[...k,...i]),O.current.scrollIntoView(!0)}),g.on("simulationresponse",p=>{L(w+1),console.log("task received =",p.taskId),console.log("its result =",p.result);let i=[{taskId:p.taskId,result:p.result}];m(k=>[...k,...i]),w==T&&(console.log("disconnected"),g.disconnect())})};return e(J,{theme:Y,children:d("div",{children:[e("h1",{style:{backgroundColor:"#1e1e1e",color:"#bb86fc",padding:"3vh",margin:"0"},children:"IPPTS ALGORITHM SIMULATION"}),e(V,{maxWidth:"xl",children:d("form",{onSubmit:l=>{I=="run"?u(!1):I=="simulate"&&(S(!1),m([{taskId:-1,result:"0"}]),R([{taskId:-1,result:" ",serverTime:" ",serverId:-1}]),console.log("simu array at beginning = ",f),L(0));let y=[],T=[];l.preventDefault();const g=new FormData(l.target),p=i=>({expression:g.get(`expr${i}`),taskId:i});for(let i=0;i<r;i++){let k={task:p(i),compCosts:[]},$={task:p(i),commCosts:[]};for(let v=0;v<c;v++){let N={server:{url:"",serverId:v},cost:Number(g.get(`compcell${i}${v}`))};k.compCosts.push(N)}for(let v=0;v<r;v++){let N={task:p(v),weight:Number(g.get(`adjcell${i}${v}`))};$.commCosts.push(N)}T.push(k),y.push($)}H({method:"post",url:"http://localhost:5030/ippts",headers:{"content-type":"application/json"},responseType:"json",data:{taskGraph:y,computationCostMatrix:T}}).then(function(i){console.log("ippts output array =",i.data),sessionStorage.setItem("ippts-output",JSON.stringify(i.data)),I=="run"?u(!0):I=="simulate"&&z()}).catch(function(i){console.log(i)})},children:[d("div",{style:{marginBlock:"2em"},children:[e("p",{children:"Enter the number of Nodes(Tasks) in Graph:"}),e(A,{inputProps:{type:"text",pattern:"[0-9]*",maxLength:"2",style:{padding:"0.5em"}},color:"primary",focused:!0,value:r,onChange:l=>n(Number(l.currentTarget.value))}),e("p",{children:"Enter the number of Servers:"}),e(A,{inputProps:{type:"text",maxLength:"2",pattern:"[0-9]*",style:{padding:"0.5em"}},color:"primary",focused:!0,value:c,onChange:l=>{s(Number(l.currentTarget.value)),Number(l.currentTarget.value)<=3&&Number(l.currentTarget.value)>0?t(!1):t(!0)}})]}),d("div",{style:{marginBlock:"2em"},children:[e("p",{children:"Enter the Adjacency Matrix of the Task Graph:"}),e("div",{style:{overflowX:"auto"},children:e("table",{className:"adjMat",id:"adjMat",children:e("tbody",{children:e(P,{num1:r,num2:r,expr:!1})})})})]}),d("div",{style:{marginBlock:"2em"},children:[e("p",{children:"Enter the Computation Cost Matrix (along with expression):"}),e("div",{style:{overflowX:"auto"},children:e("table",{className:"compMat",id:"compMat",children:e("tbody",{children:e(P,{num1:r,num2:c+1,expr:!0})})})})]}),e(C,{type:"submit",onClick:()=>{x("run"),j(!1)},name:"run",sx:{marginInline:"2em",marginBlock:"1em",fontSize:"calc(12px + 1vmin)"},variant:"outlined",color:"warning",children:"RUN ALGO"}),e(C,{type:"submit",onClick:()=>{x("simulate"),j(!1)},name:"simulate",sx:{marginInline:"2em",marginBlock:"1em",fontSize:"calc(12px + 1vmin)"},disabled:o,variant:"outlined",color:"warning",children:"SIMULATE"}),a?e(ee,{servers:c,tasks:r}):e("div",{}),b?e(te,{SimArray:f,servers:c}):e("div",{}),e("div",{id:"dispTasks",ref:O,children:b?e("div",{style:{color:"rgba(209, 213, 219, 1)",width:"90%",marginInline:"5%",textAlign:"left",overflowY:"scroll",height:"150px",fontSize:"0.75em"},children:D.map((l,y)=>{if(y!=0)return d("div",{style:{marginTop:"0.5em"},children:["@Server ",l.serverId," |  ",l.serverTime," |  Task ",l.taskId+1," is ",l.result]})})}):e("div",{})}),e(C,{sx:{marginInline:"2em",marginBlock:"1em",fontSize:"calc(12px + 1vmin)"},disabled:M,variant:"outlined",color:"success",onClick:B,children:"Download Result"})]})})]})})};function se(){return e("div",{className:"App",children:e(re,{})})}X.render(e(h.StrictMode,{children:e(se,{})}),document.getElementById("root"));
